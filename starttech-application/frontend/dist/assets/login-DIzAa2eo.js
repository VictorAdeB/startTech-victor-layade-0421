import{e as h,u as f,d as y,r as b,o as j,a as w,t as c,b as v,j as e,L as N,s as d}from"./index-CmilNsW5.js";import{u as S,a as q}from"./zod-BsoTg_zf.js";const C=j({username:d().min(1,"Username is required"),password:d().min(1,"Password is required")});function k(){const u=h(),m=f(),{setUser:x}=y(),[i,a]=b.useState(null),{register:o,handleSubmit:g,formState:{errors:t,isSubmitting:l}}=S({resolver:q(C)}),r=w({mutationFn:async s=>(await v.post("/auth/login",s)).data,onSuccess:s=>{x(s.user),m.setQueryData(["currentUser"],s.user),c.success("Logged in successfully"),u({to:"/todos"})},onError:s=>{const n=s.response?.data?.error||"Invalid username or password";a(n),c.error(n)}}),p=s=>{a(null),r.mutate(s)};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900",children:"Sign in to your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",e.jsx(N,{to:"/register",className:"font-medium text-indigo-600 hover:text-indigo-500",children:"create a new account"})]})]}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g(p),children:[e.jsxs("div",{className:"-space-y-px rounded-md shadow-sm",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),e.jsx("input",{id:"username",type:"text",autoComplete:"username",required:!0,className:"relative block w-full rounded-t-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3",placeholder:"Username",...o("username")}),t.username&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.username.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",type:"password",autoComplete:"current-password",required:!0,className:"relative block w-full rounded-b-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:z-10 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6 px-3",placeholder:"Password",...o("password")}),t.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.password.message})]})]}),i&&e.jsx("div",{className:"text-red-500 text-sm text-center",children:i}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l||r.isPending,className:"group relative flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-50",children:l||r.isPending?"Signing in...":"Sign in"})})]})]})})}export{k as component};
